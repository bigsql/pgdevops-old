<div class="modal-header">
    <div ng-click="cancel()" class="close-modal pull-right" data-dismiss="modal" aria-hidden="true">
        <i class="fa fa-lg fa-close cursor_pointer"></i>
    </div>
    <h4 class="modal-title">Create New RDS Instance</h4>
</div>
<div class="modal-body" class="create-rds-modal">
    <div ng-if="loading" class="text-center">
        <i class="fa fa-cog fa-spin fa-5x fa-fw margin-bottom"></i>
    </div>
    <div ng-if="firstStep && !loading">
        <div class="row">
            <div class="col-sm-2" style="margin-right: -100px; margin-top: 5px; margin-left:10px;"><strong>Region :</strong> </div>
            <div class="col-sm-4">
                <select class="form-control"  ng-change="regionChange(regionSelect.region)" ng-options="region.region as region.location for region in regions" ng-model="data.region"></select>
            </div>
        </div>
        <div class="box-header">
            <strong>Do you plan to use this database for production purpose?</strong>
        </div>
        <div class="box-body">
            <div class="col-md-12" ng-init="InstanceType=2">
                <div class="col-md-6">
                    <div class="box-header">
                       <strong>Production</strong>
                    </div>
                    <div class="box-body create-rds-prod">
                        <label><input type="radio" name="isProd" value="1" ng-model="InstanceType" ng-disabled="true">&nbsp; PostgresSQL</label>
                        <br />
                        <div style="margin-left:20px;">
                            Use Multi-AZ Deployment and Provisioned IOPS Storage as defaults for high availability and fast, consistent performance.
                        </div>
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="box-header">
                       <strong>Dev/Test</strong>
                    </div>
                    <div class="box-body create-rds-dev-test">
                        <label><input type="radio" value="2" ng-model="InstanceType" name="isProd">&nbsp; PostgresSQL</label>
                        <br />
                        <div style="margin-left:20px;">
                            This instance is intended for use outside of production or under the RDS Free Usage Tier.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="row" ng-if="secondStep && !loading">
        <div class="col-md-6">
            <div>
                <div class="box-header create-rds-cat-header"> <strong>Instance Specifications</strong></div>
            </div>
            <form class="form-horizontal create-rds-modal">
                <div class="form-group">
                    <label class="col-sm-4 control-label">DB Engine :</label>
                    <div class="col-sm-8" style="margin-top:4px;">
                        postgres
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">License Model :</label>
                    <div class="col-sm-8">
                        <select class="form-control" ng-model="db.license">
                            <option value="">postgresql-license</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">DB Engine Version:</label>
                    <div class="col-sm-8">
                        <select class="form-control"  ng-change="versionChange()" ng-model="data.EngineVersion">
                            <option ng-repeat="ver in dbEngVersions" value="{{ver.EngineVersion}}">{{ver.DBEngineVersionDescription}}</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">DB Instance Class :</label>
                    <div class="col-sm-8">
                        <select class="form-control"  ng-change="typeChange(typeSelect.type)" ng-model="data.db_class">
                            <option ng-repeat="type in types" value="{{ type.instance }}"> {{type.instance}} -- {{type.v_cpu}}(vCPU), {{type.memory}} GiB RAM  </option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">Multi-AZ Deployment :</label>
                    <div class="col-sm-2">
                        <select class="form-control" ng-model="data.MultiAZ">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">Storage Type :</label>
                    <div class="col-sm-8">
                        <select class="form-control" ng-model="data.storage_type">
                            <option value="General Purpose (SSD)">General Purpose (SSD)</option>
                            <option value="Provisioned IOPS (SSD)">Provisioned IOPS (SSD)</option>
                            <option value="Magnetic">Magnetic</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">Allocated Storage :</label>
                    <div class="col-sm-2">
                        <input type="number" id="allocStroage" class="form-control" ng-model="data.allocated_storage" name="">
                    </div>
                    <div class="col-sm-2" style="margin-left: -25px; margin-top: 8px;"><strong>GB</strong></div>
                </div>
            </form>
        </div>
        <div class="col-md-6">
            <div>
                <div class="box-header create-rds-cat-header"> <strong>Settings </strong></div>
            </div>
            <form class="form-horizontal create-rds-modal" name="initForm">
                <div class="form-group">
                    <label class="col-sm-4 control-label">DB Instance Identifier:</label>
                    <div class="col-sm-8">
                        <input type="text" id="dbClass" class="form-control" ng-model="data.instance" name="" placeholder="Database Class">
                    </div>
                </div>
                 <div class="form-group">
                    <label class="col-sm-4 control-label">Master User:</label>
                    <div class="col-sm-8">
                        <input type="text" id="userName" class="form-control" ng-model="data.master_user" name="" placeholder="User Name">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">Master Password:</label>
                    <div class="col-sm-8">
                        <input type="password"  class="form-control" id="password" name="password" ng-model="data.password" placeholder="Password" required />
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">Confirm Password:</label>
                    <div class="col-sm-8">
	                    <input type="password" class="form-control" id="password_c" name="password_c" ng-model="data.confPassword" placeholder="Password"  ng-disabled="initializing"valid-password-c required  />
                        <span ng-show="!initForm.password_c.$error.required && initForm.password_c.$error.noMatch && initForm.password.$dirty">Passwords do not match.</span>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div ng-if="thirdStep && !loading" class="row">
        <div class="col-md-12">
         <div class="col-md-6">
            <div>
                <div class="box-header create-rds-cat-header"> <strong>Network & Security </strong></div>
            </div>
            <form class="form-horizontal create-rds-modal" ng-if="thirdStep">
                <div class="form-group">
                    <label class="col-sm-4 control-label">VPC :</label>
                    <div class="col-sm-4">
                        <select class="form-control" ng-model="vpc.select" ng-change="vpcChange()">
                            <option ng-repeat="dat in networkSec" value="{{dat.vpc}}">{{dat.vpc}}</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">Subnet Group:</label>
                    <div class="col-sm-8">
                        <input type="text" id="sbGroup" class="form-control" ng-model="data.subnet_group" name="" placeholder="Subnet Group">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">Publicly Accessible : </label>
                    <div class="col-sm-8">
                        <select class="form-control" ng-model="data.publicly">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">Availability Zone : </label>
                    <div class="col-sm-8">
                        <select class="form-control" ng-model="data.zone">
                            <option ng-repeat="zone in availableZones" value="{{zone.name}}">{{zone.name}}</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-4 control-label">VPC Security Group(s) : </label>
                    <div class="col-sm-8" ng-model="data.vpcGroup">
                        <textarea class="form-control">default (VPC)</textarea>
                    </div>
                </div>
            </form>
        </div>
            <div class="col-md-6">
            <div>
                <div class="box-header create-rds-cat-header"> <strong>Database Options </strong></div>
            </div>
            <form class="form-horizontal create-rds-modal" ng-if="thirdStep">
                <div class="form-group">
                    <label class="col-sm-5 control-label">Database Name:</label>
                    <div class="col-sm-7">
                        <input type="text" id="dbName" class="form-control" ng-model="data.dbname" name="" placeholder="Database Name">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Database Port:</label>
                    <div class="col-sm-7">
                        <input type="number" id="port" class="form-control" ng-model="data.port" name="" placeholder="Port">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">DB Parameter Group :</label>
                    <div class="col-sm-7">
                        <select class="form-control" ng-model="data.dbGroup" ng-options="db.DBParameterGroupName as db.DBParameterGroupName for db in dbGroups"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Option Group :</label>
                    <div class="col-sm-7">
                        <select class="form-control" ng-model="data.optionGroup" ng-options="option.OptionGroupName as option.OptionGroupName for option in optionGroups"></select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Copy Tags To Snapshots :</label>
                    <div class="col-sm-7">
                        <input type="checkbox" class="form-control" ng-model="data.snapshots">
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Enable Encryption : </label>
                    <div class="col-sm-7">
                        <select class="form-control" ng-model="data.storage_encrypted">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
        </div>
        <div class="col-md-12">
            <div class="col-md-6">
            <div>
                <div class="box-header create-rds-cat-header"> <strong>Monitoring </strong></div>
            </div>
            <form class="form-horizontal create-rds-modal" ng-if="thirdStep">
                <div class="form-group">
                    <label class="col-sm-5 control-label">Enable Enhanced Monitoring : </label>
                    <div class="col-sm-7">
                        <select class="form-control" ng-model="data.enableMon">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" ng-if="data.enableMon == 'yes'">
                    <label class="col-sm-5 control-label"> Monitoring Role : </label>
                    <div class="col-sm-7">
                        <select class="form-control" ng-model="data.monitoring_role">
                            <option value="default">Default</option>
                        </select>
                    </div>
                </div>
                <div class="form-group" ng-if="data.enableMon == 'yes'">
                    <label class="col-sm-5 control-label"> Granularity : </label>
                    <div class="col-sm-2">
                        <select class="form-control" ng-model="data.granularity">
                            <option ng-repeat="n in [] | range:120" value="{{$index}}">{{$index}}</option>
                        </select>
                    </div>
                    <div class="col-sm-2" style="margin-left: -25px; margin-top: 8px;"><strong>second(s)</strong></div>
                </div>
            </form>
        </div>
        <div class="col-md-6">
            <div>
                <div class="box-header create-rds-cat-header"> <strong>Maintenance </strong></div>
            </div>
            <form class="form-horizontal create-rds-modal" ng-if="thirdStep">
                <div class="form-group">
                    <label class="col-sm-5 control-label">Auto Minor Version Upgrade : </label>
                    <div class="col-sm-7">
                        <select class="form-control" ng-model="data.autoUpgrade">
                            <option value="no">No</option>
                            <option value="yes">Yes</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Maintenance Window :</label>
                    <div class="col-sm-7">
                        <select class="form-control" ng-model="data.mainWindow">
                            <option value="">Select Window</option>
                        </select>
                    </div>
                </div>
            </form>
        </div>
            <div class="col-md-6">
            <div>
                <div class="box-header create-rds-cat-header"> <strong>Backup </strong></div>
            </div>
            <form class="form-horizontal create-rds-modal" ng-if="thirdStep">
                <div class="form-group">
                    <label class="col-sm-5 control-label">Backup Retention Period : </label>
                    <div class="col-sm-2">
                        <select class="form-control" ng-model="data.backup_retention">
                            <option ng-repeat="n in [] | range:36" value="{{$index}}">{{$index}}</option>
                        </select>
                    </div>
                    <div class="col-sm-2" style="margin-left: -25px; margin-top: 8px;"><strong>days</strong></div>
                </div>
                <div class="form-group">
                    <label class="col-sm-5 control-label">Backup Window:</label>
                    <div class="col-sm-7">
                        <select class="form-control" ng-model="backupWindow">
                        </select>
                    </div>
                </div>
            </form>
        </div>
        </div>
    </div>
</div>
<div class="modal-footer" ng-if="!loading">
    <div class="pull-left">
        <div ng-if="showErrMsg">
            <strong style="color:#EF0808;">{{errMsg}}</strong>
        </div>
    </div>
    <div class="pull-right">
        <button class="btn btn-default" ng-if="!firstStep" ng-click="previous()">Previous</button>
        <button class="btn btn-primary" ng-if="!thirdStep && secondStep" ng-disabled="!data.master_user || !data.instance || !data.password" ng-click="next()">Next Step</button>
        <button class="btn btn-primary" ng-if="!thirdStep && !secondStep" ng-click="next()">Next Step</button>
        <button class="btn btn-primary" ng-if="thirdStep" ng-disabled="creating" ng-click="createRDS()"> <i ng-if="creating" class="fa fa-spinner fa-pulse"></i> Create</button>
    </div>
</div>